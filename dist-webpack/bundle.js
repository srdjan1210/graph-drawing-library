!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.graphDrawing=e():t.graphDrawing=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function i(t){if(!t||0==t.length)return null;let e=t[0];for(let i of t)i>e&&(e=i);return e}function s(t){if(!t||0==t.length)return null;let e=t[0];for(let i of t)i<e&&(e=i);return e}function h(t){let e=window.devicePixelRatio,i=document.getElementById(t.id),s=()=>+window.getComputedStyle(i).getPropertyValue("height").slice(0,-2),h=()=>+window.getComputedStyle(i).getPropertyValue("width").slice(0,-2);t.setAttribute("height",s()*e+"px"),t.setAttribute("width",h()*e+"px")}t.r(e),t.d(e,{BarGraph:()=>l,fix_dpi:()=>h});class l extends class{constructor(t){this.shouldAnimate=!0,this.leftOffset=10,this.bottomOffset=10,this.topOffset=30,this.rightoffset=10,this.title="",this.titleVisibility=!0,this.resizedNumber=0,this.dataColor="blue",this.horizontalLinesEnabled=!0,this.verticalLinesEnabled=!0,this.labels=[],this.HORIZONTAL_LINES_COUNT=11,this.OFFSET_CONSTANT=.15,this.canvas=t,this.ctx=t.getContext("2d"),this.initializeVariables(),this.initializeResizeObserver(),this.prepareCanvas()}initializeVariables(){let t=this.canvas.width,e=this.canvas.height;this.width=t,this.height=e,this.leftOffset=this.OFFSET_CONSTANT*e,this.rightoffset=this.leftOffset,this.topOffset=this.OFFSET_CONSTANT*e,this.bottomOffset=this.OFFSET_CONSTANT*e,this.xlength=this.width-this.leftOffset-this.rightoffset,this.ylength=this.height-this.bottomOffset-this.topOffset,this.xbegin=this.leftOffset,this.ybegin=this.height-this.bottomOffset,console.log(this.topOffset,this.bottomOffset,this.rightoffset,this.leftOffset)}initializeResizeObserver(){let t=this;new ResizeObserver((function(){0!=t.resizedNumber&&h(t.canvas),t.initializeVariables(),t.resizedNumber++,t.repaint()})).observe(this.canvas)}prepareCanvas(){this.restartCanvas(),this.moveToCoordinateCenter(),this.reverseScaleYAxis()}restartCanvas(){this.ctx.save(),this.ctx.fillStyle="white",this.ctx.setTransform(1,0,0,1,0,0),this.ctx.fillRect(0,0,this.width,this.height),this.ctx.restore()}repaint(){this.restartCanvas(),this.reverseScaleYAxis(),this.drawXAxis(),this.drawYAxis(),this.drawHorizontalLines(),this.drawVerticalLines(),this.writeTitle(),this.draw()}drawXAxis(){this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.xlength,1)}drawYAxis(){this.ctx.save(),this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,1,this.xAxisCoor-this.topOffset),this.ctx.fillRect(0,0,1,-Math.abs(this.ylength-(this.xAxisCoor-this.topOffset))),this.ctx.restore()}moveToCoordinateCenter(){this.ctx.translate(this.leftOffset,this.height-this.topOffset)}drawHorizontalLines(){if(!this.horizontalLinesEnabled)return;let t=(this.xAxisCoor-this.topOffset)/this.ylength,e=Math.floor(t*this.HORIZONTAL_LINES_COUNT),i=this.HORIZONTAL_LINES_COUNT-e;this.drawHorizontalLinesAboveZero(e,this.xAxisCoor-this.topOffset),this.drawHorizontalLinesBelowZero(i,this.ylength+this.topOffset-this.xAxisCoor)}drawHorizontalLinesAboveZero(t,e){let i=e/t;this.ctx.save(),this.ctx.fillStyle="darkgray";for(let t=i;t<=e;t+=i)this.ctx.fillRect(0,t,this.xlength,1);this.ctx.restore()}drawHorizontalLinesBelowZero(t,e){let i=e/t;this.ctx.save(),this.ctx.fillStyle="darkgray";for(let t=i;t<=e;t+=i)this.ctx.fillRect(0,-t,this.xlength,1);this.ctx.restore()}drawVerticalLines(){let t=this.xlength/this.dataset.length;this.ctx.save(),this.ctx.fillStyle="#a8a8a8";for(let e=0;e<this.dataset.length;e++)this.ctx.fillRect(e*t,this.xAxisCoor-this.topOffset,1,-this.ylength);this.ctx.restore()}reverseScaleYAxis(){let t=(e=s(this.dataset),h=i(this.dataset),l=this.ylength,a=this.topOffset,null==e||null==h||e>=0&&h>0?a+l:e<0&&h<=0?a:e<0&&h>0?a+h/(h+Math.abs(e))*l:a+l);var e,h,l,a;this.xAxisCoor=t,this.ctx.setTransform(1,0,0,1,this.leftOffset,t),this.ctx.scale(1,-1)}scaleYvalue(){let t=this.determineValueCase();return this.dataset.map((e=>e*t))}determineValueCase(){let t=s(this.dataset),e=i(this.dataset);return t>=0&&e>0?this.ylength/e:t<0&&e<=0?this.ylength/Math.abs(t):t<0&&e>0?this.ylength/(e+Math.abs(t)):void 0}writeTitle(){if(!this.titleVisibility)return;let t=this.width/2-10;this.ctx.save(),this.ctx.fillStyle="#6e6e6e",this.ctx.font="bold 15px Arial",this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(1,1),this.ctx.fillText(this.title,t+.5,this.topOffset/2+.5),this.ctx.restore()}setDataset(t){this.dataset=t}setAnimation(t){this.shouldAnimate=t}setTitle(t){this.title=t}setTitleVisible(t){this.titleVisibility=t}setDataColor(t){this.dataColor=t}enableHorizontalLines(t){this.horizontalLinesEnabled=t}enableVerticalLiens(t){this.verticalLinesEnabled=t}setLabels(t){this.labels=t}}{constructor(t){super(t),this.loaded=.1,this.datasetBars=[],this.barOffsetCof=.1}repaint(){super.repaint(),this.drawBottomLabels()}draw(){if(0==this.dataset.length)return;this.datasetBars=[];let t=this.xlength/this.dataset.length,e=t*this.barOffsetCof;console.log(e);let i=t-2*e;this.ctx.fillStyle=this.dataColor;let s=this.scaleYvalue();this.shouldAnimate?this.drawAnimatedAllPoints(s,t,e,i,this.loaded):this.drawPointsWithoutAnimation(s,t,e,i)}drawAnimatedAllPoints(t,e,i,s,h){if(!(h>=1)){window.requestAnimationFrame((()=>this.drawAnimatedAllPoints(t,e,i,s,h+.02)));for(let l=0;l<t.length;l++)this.drawSingleBar(l*e+i,0,s,t[l]*h)}}drawPointsWithoutAnimation(t,e,i,s){for(let h=0;h<t.length;h++)this.drawSingleBar(h*e+i,0,s,t[h])}drawSingleBar(t,e,i,s){this.ctx.fillRect(t,e,i,s);let h={xstart:t,xend:t+i};this.datasetBars.push(h)}drawBottomLabels(){if(0==this.labels.length)return;let t=this.xlength/this.dataset.length;for(let e=0;e<this.labels.length;e++)this.drawLabelAtPosition(this.labels[e],e,t)}drawLabelAtPosition(t,e,i){this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.translate(this.leftOffset,this.ylength+this.topOffset),this.ctx.fillStyle="black";let s=(h=this.height)<200?6:h<400?10:h<800?20:25;var h;this.ctx.font=`bold ${Math.floor(s)}px Arial`;let l=this.ctx.measureText(t).width;l>i-20?this.drawCurvedLabel(t,l,s,e,i):this.ctx.fillText(t,e*i+10+(i-20-l)/2,this.bottomOffset/2,i-20),this.ctx.restore()}drawCurvedLabel(t,e,i,s,h){let l=10+h/2+25,a=Math.sqrt(Math.pow(e,2)-Math.pow(l,2)),r=Math.asin(a/e);this.ctx.save(),this.ctx.translate(s*h-25,a+i),this.ctx.rotate(-r),this.ctx.fillText(t,0,0),this.ctx.restore()}}return e})()}));